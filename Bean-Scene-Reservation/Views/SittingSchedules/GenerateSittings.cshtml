@model Bean_Scene_Reservation.Models.SittingSchedule;

@{
    ViewData["Title"] = "Generate Sittings for " + Model.Name;
    //var sittings = ViewData["Sittings"] as List<Sitting>;
    List<Sitting> sittings = await ViewBag.Sittings;
}

<h1 class="open-sans">@ViewData["Title"]</h1>

@if (sittings.Count == 0)
{
    <p>Sittings can be automatically generated from the schedule @(Model.Name).</p>
    <p class="text-success">There are no sittings that conflict with this schedule!</p>
} else
{
    <p>
        The sitting schedule <em>@Model.Name</em> 
        from <em>@Model.StartDate</em> to <em>@Model.EndDate</em>
        conflicts with <strong>@(sittings.Count) sittings!</strong>
    </p>
    <p>
        These existing sittings will <strong>NOT</strong> be affected,
        but will prevent new sittings <em>@Model.Name</em> would make on these dates:
    </p>


<div class="table-responsive">
    <table class="table align-middle">
        <thead>
            <tr>
                <th>Date</th>
                <th>Type</th>
            </tr>
        </thead>
        <tbody>
    @foreach(var item in sittings)
    {
                <tr>
                    <td>
                        @(item.Date)
                    </td>
                    <td>
                        @(item.SittingType.Name)
                    </td>
                </tr>
    }
        </tbody>
    </table>
</div>

<p class="text-danger">Are you sure you want to generate sittings?</p>
}

<form class="border-top mt-4 pt-4" asp-action="GenerateSittings">
    <input type="hidden" asp-for="Id" />
    <input type="submit" value="Generate" class="btn btn-primary" aria-label="Generate" title="Generate" />
    <a asp-action="Index" class="btn btn-secondary" aria-label="Cancel">Cancel</a>
</form>